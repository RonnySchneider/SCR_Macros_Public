<StackPanel Background="#FFF3F3F7"
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:Wpf="clr-namespace:Trimble.Vce.UI.Controls.Wpf;assembly=Trimble.Vce.UI.Controls" mc:Ignorable="d"  HorizontalAlignment="Stretch"  Margin="4"
       d:DesignWidth="222" d:DesignHeight="600">

    <Expander BorderThickness="2,2,2,2" IsExpanded="{Binding IsChecked, ElementName=retrievegps}" Background="#FFCBECC2" BorderBrush="#FF337C27">

        <Expander.Header>
            <WrapPanel>
                <RadioButton x:Name="retrievegps" IsChecked="True" VerticalAlignment="Center" GroupName="group1" Checked="radiochange_Click"/>
                <Label Content="retrieve GPS location from image EXIF data"/>
            </WrapPanel>

        </Expander.Header>
        <StackPanel IsEnabled="{Binding IsChecked, ElementName=retrievegps}">

            <Button x:Name="openbutton" Content="Select Image Folder" Height="42" HorizontalContentAlignment="Center" Click="openbutton_Click" />
            <Label>
                <TextBlock x:Name="openfilename" IsEnabled="False" Text=""/>
            </Label>
            <Label Content="Select Alignment for Chainage Computation" Visibility="Hidden" Height="0"/>
            <Wpf:SelectEntity x:Name="linepicker1" Visibility="Hidden" Height="0"/>

            <Label Content="select Output Point Layer:"/>
            <Wpf:LayerPicker x:Name="layerpicker"/>

            <CheckBox x:Name="writechainagetofile" Visibility="Hidden" Height="0"  Content="write chainage to file (untick if you just need the points on the screen" IsChecked="False"/>
        </StackPanel>
    </Expander>

    <Expander BorderThickness="2,2,2,2" IsExpanded="{Binding IsChecked, ElementName=copyfiles}" Background="#FFDABB83" BorderBrush="#FFCD8025">

        <Expander.Header>
            <WrapPanel>
                <RadioButton x:Name="copyfiles" IsChecked="False" VerticalAlignment="Center" GroupName="group1" Checked="radiochange_Click"/>
                <Label Content="copy files of selected points to"/>
            </WrapPanel>

        </Expander.Header>
        <StackPanel IsEnabled="{Binding IsChecked, ElementName=copyfiles}">

            <Button x:Name="copybutton" Content="Select Image Folder" Height="42" HorizontalContentAlignment="Center" Click="copybutton_Click"/>
            <Label>
                <TextBlock x:Name="copytargetfolder" IsEnabled="False" Text=""/>
            </Label>
            <Wpf:MemberSelection x:Name="objs" Height="30" Margin="0"/>

            <Border Background="#FFCBECC2" BorderBrush="#FF337C27" BorderThickness="1">
                <StackPanel>
                <Wpf:LayerPicker x:Name="layerpickergood"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="3*"/>
                        <ColumnDefinition Width="7*"/>
                    </Grid.ColumnDefinitions>
                        <Label Grid.Column="0" x:Name="goodlayercountlabel" Content=""/>
                        <Button Grid.Column="1" x:Name="relayertogoodbutton" Content="relayer to good Layer" Click="relayerbutton_Click" />
                </Grid>
                </StackPanel>
            </Border>

            <Border Background="#FF8585" BorderBrush="#FF0000" BorderThickness="1">
                <StackPanel>
                    <Wpf:LayerPicker x:Name="layerpickerbad"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="3*"/>
                            <ColumnDefinition Width="7*"/>
                        </Grid.ColumnDefinitions>
                            <Label Grid.Column="0" x:Name="badlayercountlabel" Content=""/>
                            <Button Grid.Column="1" x:Name="relayertobadbutton" Content="relayer to bad Layer" Click="relayerbutton_Click" />
                    </Grid>
                </StackPanel>
            </Border>


        </StackPanel>
    </Expander>

    <Label x:Name="error" Content="" VerticalAlignment="Center" VerticalContentAlignment="Center" Background="#00000000" FontWeight="Bold" Foreground="Red"/>
    <Label x:Name="success" Content=""/>


</StackPanel> 